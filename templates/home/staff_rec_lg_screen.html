{% load static wagtailcore_tags wagtailimages_tags %}
<div id="staffRecommends" class="col-xl-9 feature carousel slide card">
<h4 class="card-header mt-2">Staff Recommends</h4>
<!--Carousel Wrapper-->
<div id="staffRecommendsMultiItem" class="carousel slide carousel-multi-item" data-ride="carousel">
<!--Controls-->
<div class="controls-top">
<a class="btn-floating" href="#staffRecommendsMultiItem" data-slide="prev"><i class="fa fa-lg fa-chevron-left"></i></a>
<a class="btn-floating" href="#staffRecommendsMultiItem" data-slide="next"><i class="fa fa-lg fa-chevron-right"></i></a>
</div>
<!--/.Controls-->
<!--Indicators not used
<ol class="carousel-indicators">
<li data-target="#staffRecommendsMultiItem" data-slide-to="0" class="active"></li>
<li data-target="#staffRecommendsMultiItem" data-slide-to="1"></li>
<li data-target="#staffRecommendsMultiItem" data-slide-to="2"></li>
</ol>
-->
<!--Slides-->
<div class="carousel-inner" role="listbox">
<!--First slide-->
{% for books in page.staff_recommends.all %} {% if forloop.first %}
<div class="carousel-item active">
<div class="row">
{% for books in page.staff_recommends.all %} {% if forloop.parentloop.counter == forloop.counter or forloop.parentloop.counter|add:"1" == forloop.counter or forloop.parentloop.counter|add:"2" == forloop.counter %}
<div class="col-md-4">
<div class="card mt-2 ml-2 mr-2">
<div class="card-img-top mt-2">
<a href="{{ books.catalogue_link }}">{% image books.book_cover class="img-fluid" fill-220x325 %}</a>
</div>
<div class="card-body">
<!--<div class="card-subtitle mb-2"><a href="#">{{ books.get_read_watch_listen_display }}</a></div>-->
<div class="card-title mt-2"><a href="{{ books.catalogue_link }}">{{ books.book_cover.title }}</a></div>
</div>
</div>
</div>
{% endif %} {% endfor %}
</div>
</div>
{% endif %}
<!--All Other Slides-->
{% if forloop.counter|divisibleby:"3" %} {% for books in page.staff_recommends.all %} {% if forloop.parentloop.counter|add:"1" == forloop.counter %}
<div class="carousel-item">
<div class="row">
{% for books in page.staff_recommends.all %} {% if forloop.parentloop.counter == forloop.counter or forloop.parentloop.counter|add:"1" == forloop.counter or forloop.parentloop.counter|add:"2" == forloop.counter %}
<div class="col-md-4">
<div class="card mt-2 ml-2 mr-2">
<div class="card-img-top mt-2">
<a href="{{ books.catalogue_link }}">{% image books.book_cover class="img-fluid" fill-220x325 %}</a>
</div>
<div class="card-body">
<!--<div class="card-subtitle mb-2"><a href="#">{{ books.get_read_watch_listen_display }}</a></div>-->
<div class="card-title mt-2"><a href="{{ books.catalogue_link }}">{{ books.book_cover.title }}</a></div>
</div>
</div>
</div>
{% endif %} {% endfor %}
</div>
</div>
{% endif %} {% endfor %} {% endif %} {% endfor %}
</div>
<!--/.Slides-->
</div>
<!--/.Carousel Wrapper-->
</div><!--staff recommends-->